# archetypes.py

# --- 判定ロジック (Archetype Logic) ---
def calculate_archetype(scores):
    phi = scores.get("哲学 (Philosophy)", 0)
    env = scores.get("環境 (Environment)", 0)
    tal = scores.get("才能 (Talent)", 0)
    des = scores.get("構想 (Vision)", 0)
    vit = scores.get("健康 (Vitality)", 0)
    con = scores.get("繋がり (Connection)", 0)
    
    min_score = min(scores.values())
    max_score = max(scores.values())

    # 1. Type 5 (統合された統治者) - 全て4.0以上
    if min_score >= 4.0:
        return "Type 5: 統合された統治者", "人生のあらゆる要素が調和し、あなたは自分の王国をしっかりと治めています。完璧に見える今だからこそ、あえて「隙」や「遊び」を作ることで、魅力はさらに深まるでしょう。", "👑"

    # 2. Type 1 (傷ついた戦士) - 健康<3.0 or 全体<2.5
    if vit < 3.0 or max_score < 2.5:
        return "Type 1: 傷ついた戦士", "責任感と優しさゆえに、あなたは誰よりも戦い続けてきました。でも、もう十分です。今はその重い鎧を脱いで、戦場から離れてみませんか？ 傷を癒やすことは、弱さではなく、次に進むための勇気ある選択です。", "🛡️"

    # 3. 複合タイプ
    if con >= 4.0 and des >= 4.0 and vit >= 3.5:
        return "Type 9: 求心力あるリーダー", "あなたの周りには自然と人が集まり、大きな渦が生まれます。皆の想いを背負って進むことができるリーダーです。期待に応えることも大切ですが、あなた自身の魂の純度を保つことが、結果として皆を幸せにします。", "🌞"
    if tal >= 4.0 and des >= 4.0:
        return "Type 13: 構想する建築家", "あなたの頭の中には、美しい未来の設計図が完成しています。その才能とビジョンは世界を変える力があります。あとは、それを現実に降ろすための「土台（環境）」作りが鍵となるでしょう。", "🏗️"
    if tal >= 4.0 and con >= 4.0:
        return "Type 10: 輝ける表現者", "あなたのには人々を魅了する華があります。才能と愛嬌を兼ね備えたあなたは、ステージに立つべくして生まれた人。他者の評価よりも、あなた自身が「楽しむ」ことを最優先にしてください。", "🌟"
    if phi >= 4.0 and des >= 4.0:
        return "Type 7: 戦略的な策士", "確固たる信念と、未来を見通す目を持っています。感情に流されず、最短距離でゴールを目指す知性があります。その冷徹なまでの賢さに「愛敬」が加われば、あなたは無敵です。", "♟️"

    # 4. 単独タイプ
    if phi >= 4.0:
        return "Type 4: 哲学する賢者", "あなたは揺るがない「自分軸」と深い知恵を持っています。周囲の雑音に惑わされることはありません。その高潔な精神性を、今度は「他者」と分かち合うことで、あなたの世界はさらに広がります。", "🦉"
    if env >= 4.0:
        return "Type 2: 守り育てる守護者", "あなたには安心できる豊かな土台があります。周囲の人を守り、育てる包容力に溢れています。与えるばかりではなく、時にはあなた自身が「守られる」喜びも味わってください。", "🌳"
    if tal >= 4.0:
        return "Type 8: 孤高の職人", "卓越したスキルと才能を持っています。誰にも真似できないクオリティを生み出す力は、一種の魔法です。その才能を自分だけのものにせず、世界へのギフトとして開放する時が来ています。", "🔨"
    if des >= 4.0:
        return "Type 12: 夢見る旅人", "誰よりも遠くの未来を見ています。あなたの語る夢は、人々に希望を与えます。あとは「最初の一歩」を踏み出すだけ。夢を現実にするための泥臭い行動が、あなたを真の勇者にします。", "🌈"
    if vit >= 4.0:
        return "Type 6: 活気ある冒険家", "生命力とエネルギーに満ち溢れています。あなたの存在そのものが、周囲を明るく照らすパワーです。その有り余るエネルギーを、誰かのために使った時、伝説が始まります。", "🔥"
    if con >= 4.0:
        return "Type 11: 愛の人", "あなたの人生は愛と喜びに満ちています。人との繋がりこそがあなたのエネルギー源です。その温かさで周囲を癒やしつつ、時には自分自身の内なる声（哲学）にも耳を傾けてみてください。", "💞"

    # 5. デフォルト
    return "Type 3: 調和する市民", "あなたはバランス感覚に優れ、どのような環境でも適応できる柔軟性を持っています。今はまだ「これだ！」という武器が見つかっていないかもしれませんが、それは何にでもなれる可能性の証です。まずは一番低いスコアの要素を磨いてみましょう。", "🌱"